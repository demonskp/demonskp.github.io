import{q as ne,ao as ve,D as z,ap as ze,a2 as Ce,v as p,M as ce,n as me,k as pe,o as v,c as P,g as f,w as I,d as m,y as _,i as e,B as de,O as Le,A as C,b as k,F as K,z as Ee,h as ge,G as xe,J as Ne,x as ee,T as Se,K as Te,a4 as Oe,t as te,H as $e,Q as Re,_ as Ae,N as _e,r as Be,u as Me,aq as Ve}from"./index.cd9aeec5.js";import{i as M,T as De,I as we,f as fe,J as ye,H as ae,ax as Ye,ay as He,u as he,c as ke,A as Xe,b as T,g as Fe,as as Pe,ap as Ke,az as je,aA as We,aB as qe,aC as Ge,_ as be,y as V,G as Ze,E as B,w as Ie,K as Je,e as Qe,aD as Ue,aE as et}from"./index.041a12c5.js";import{d as tt}from"./debounce.b48b3559.js";const at=(r,c)=>{if(!M||!r||!c)return!1;const n=r.getBoundingClientRect();let s;return c instanceof Element?s=c.getBoundingClientRect():s={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},n.top<s.bottom&&n.bottom>s.top&&n.right>s.left&&n.left<s.right};var nt="Expected a function";function ue(r,c,n){var s=!0,d=!0;if(typeof r!="function")throw new TypeError(nt);return De(n)&&(s="leading"in n?!!n.leading:s,d="trailing"in n?!!n.trailing:d),tt(r,c,{leading:s,maxWait:c,trailing:d})}const st=we({urlList:{type:fe(Array),default:()=>ye([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),ot={close:()=>!0,switch:r=>ae(r),rotate:r=>ae(r)},lt=["src"],rt=ne({name:"ElImageViewer"}),it=ne({...rt,props:st,emits:ot,setup(r,{expose:c,emit:n}){const s=r,d={CONTAIN:{name:"contain",icon:ve(Ye)},ORIGINAL:{name:"original",icon:ve(He)}},{t:g}=he(),l=ke("image-viewer"),{nextZIndex:D}=Xe(),O=z(),S=z([]),E=ze(),L=z(!0),w=z(s.initialIndex),y=Ce(d.CONTAIN),u=z({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),Y=p(()=>{const{urlList:t}=s;return t.length<=1}),R=p(()=>w.value===0),j=p(()=>w.value===s.urlList.length-1),se=p(()=>s.urlList[w.value]),oe=p(()=>[l.e("btn"),l.e("prev"),l.is("disabled",!s.infinite&&R.value)]),H=p(()=>[l.e("btn"),l.e("next"),l.is("disabled",!s.infinite&&j.value)]),le=p(()=>{const{scale:t,deg:o,offsetX:i,offsetY:h,enableTransition:x}=u.value;let b=i/t,N=h/t;switch(o%360){case 90:case-270:[b,N]=[N,-b];break;case 180:case-180:[b,N]=[-b,-N];break;case 270:case-90:[b,N]=[-N,b];break}const A={transform:`scale(${t}) rotate(${o}deg) translate(${b}px, ${N}px)`,transition:x?"transform .3s":""};return y.value.name===d.CONTAIN.name&&(A.maxWidth=A.maxHeight="100%"),A}),W=p(()=>ae(s.zIndex)?s.zIndex:D());function $(){ie(),n("close")}function re(){const t=ue(i=>{switch(i.code){case B.esc:s.closeOnPressEscape&&$();break;case B.space:J();break;case B.left:Q();break;case B.up:a("zoomIn");break;case B.right:U();break;case B.down:a("zoomOut");break}}),o=ue(i=>{const h=i.deltaY||i.deltaX;a(h<0?"zoomIn":"zoomOut",{zoomRate:s.zoomRate,enableTransition:!1})});E.run(()=>{V(document,"keydown",t),V(document,"wheel",o)})}function ie(){E.stop()}function q(){L.value=!1}function G(t){L.value=!1,t.target.alt=g("el.image.error")}function Z(t){if(L.value||t.button!==0||!O.value)return;u.value.enableTransition=!1;const{offsetX:o,offsetY:i}=u.value,h=t.pageX,x=t.pageY,b=ue(A=>{u.value={...u.value,offsetX:o+A.pageX-h,offsetY:i+A.pageY-x}}),N=V(document,"mousemove",b);V(document,"mouseup",()=>{N()}),t.preventDefault()}function X(){u.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function J(){if(L.value)return;const t=Ze(d),o=Object.values(d),i=y.value.name,x=(o.findIndex(b=>b.name===i)+1)%t.length;y.value=d[t[x]],X()}function F(t){const o=s.urlList.length;w.value=(t+o)%o}function Q(){R.value&&!s.infinite||F(w.value-1)}function U(){j.value&&!s.infinite||F(w.value+1)}function a(t,o={}){if(L.value)return;const{zoomRate:i,rotateDeg:h,enableTransition:x}={zoomRate:s.zoomRate,rotateDeg:90,enableTransition:!0,...o};switch(t){case"zoomOut":u.value.scale>.2&&(u.value.scale=Number.parseFloat((u.value.scale/i).toFixed(3)));break;case"zoomIn":u.value.scale<7&&(u.value.scale=Number.parseFloat((u.value.scale*i).toFixed(3)));break;case"clockwise":u.value.deg+=h,n("rotate",u.value.deg);break;case"anticlockwise":u.value.deg-=h,n("rotate",u.value.deg);break}u.value.enableTransition=x}return ce(se,()=>{me(()=>{const t=S.value[0];t!=null&&t.complete||(L.value=!0)})}),ce(w,t=>{X(),n("switch",t)}),pe(()=>{var t,o;re(),(o=(t=O.value)==null?void 0:t.focus)==null||o.call(t)}),c({setActiveItem:F}),(t,o)=>(v(),P(Te,{to:"body",disabled:!t.teleported},[f(Se,{name:"viewer-fade",appear:""},{default:I(()=>[m("div",{ref_key:"wrapper",ref:O,tabindex:-1,class:_(e(l).e("wrapper")),style:de({zIndex:e(W)})},[m("div",{class:_(e(l).e("mask")),onClick:o[0]||(o[0]=Le(i=>t.hideOnClickModal&&$(),["self"]))},null,2),C(" CLOSE "),m("span",{class:_([e(l).e("btn"),e(l).e("close")]),onClick:$},[f(e(T),null,{default:I(()=>[f(e(Fe))]),_:1})],2),C(" ARROW "),e(Y)?C("v-if",!0):(v(),k(K,{key:0},[m("span",{class:_(e(oe)),onClick:Q},[f(e(T),null,{default:I(()=>[f(e(Pe))]),_:1})],2),m("span",{class:_(e(H)),onClick:U},[f(e(T),null,{default:I(()=>[f(e(Ke))]),_:1})],2)],64)),C(" ACTIONS "),m("div",{class:_([e(l).e("btn"),e(l).e("actions")])},[m("div",{class:_(e(l).e("actions__inner"))},[f(e(T),{onClick:o[1]||(o[1]=i=>a("zoomOut"))},{default:I(()=>[f(e(je))]),_:1}),f(e(T),{onClick:o[2]||(o[2]=i=>a("zoomIn"))},{default:I(()=>[f(e(We))]),_:1}),m("i",{class:_(e(l).e("actions__divider"))},null,2),f(e(T),{onClick:J},{default:I(()=>[(v(),P(Ee(e(y).icon)))]),_:1}),m("i",{class:_(e(l).e("actions__divider"))},null,2),f(e(T),{onClick:o[3]||(o[3]=i=>a("anticlockwise"))},{default:I(()=>[f(e(qe))]),_:1}),f(e(T),{onClick:o[4]||(o[4]=i=>a("clockwise"))},{default:I(()=>[f(e(Ge))]),_:1})],2)],2),C(" CANVAS "),m("div",{class:_(e(l).e("canvas"))},[(v(!0),k(K,null,ge(t.urlList,(i,h)=>xe((v(),k("img",{ref_for:!0,ref:x=>S.value[h]=x,key:i,src:i,style:de(e(le)),class:_(e(l).e("img")),onLoad:q,onError:G,onMousedown:Z},null,46,lt)),[[Ne,h===w.value]])),128))],2),ee(t.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var ut=be(it,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const ct=Ie(ut),dt=we({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:fe([String,Object])},previewSrcList:{type:fe(Array),default:()=>ye([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),ft={load:r=>r instanceof Event,error:r=>r instanceof Event,switch:r=>ae(r),close:()=>!0,show:()=>!0},vt=["src","loading"],mt={key:0},pt=ne({name:"ElImage",inheritAttrs:!1}),gt=ne({...pt,props:dt,emits:ft,setup(r,{emit:c}){const n=r;let s="";const{t:d}=he(),g=ke("image"),l=Oe(),D=Je(),O=z(),S=z(!1),E=z(!0),L=z(!1),w=z(),y=z(),u=M&&"loading"in HTMLImageElement.prototype;let Y,R;const j=p(()=>[g.e("inner"),H.value&&g.e("preview"),E.value&&g.is("loading")]),se=p(()=>l.style),oe=p(()=>{const{fit:a}=n;return M&&a?{objectFit:a}:{}}),H=p(()=>{const{previewSrcList:a}=n;return Array.isArray(a)&&a.length>0}),le=p(()=>{const{previewSrcList:a,initialIndex:t}=n;let o=t;return t>a.length-1&&(o=0),o}),W=p(()=>n.loading==="eager"?!1:!u&&n.loading==="lazy"||n.lazy),$=()=>{!M||(E.value=!0,S.value=!1,O.value=n.src)};function re(a){E.value=!1,S.value=!1,c("load",a)}function ie(a){E.value=!1,S.value=!0,c("error",a)}function q(){at(w.value,y.value)&&($(),X())}const G=et(q,200,!0);async function Z(){var a;if(!M)return;await me();const{scrollContainer:t}=n;Qe(t)?y.value=t:Re(t)&&t!==""?y.value=(a=document.querySelector(t))!=null?a:void 0:w.value&&(y.value=Ue(w.value)),y.value&&(Y=V(y,"scroll",G),setTimeout(()=>q(),100))}function X(){!M||!y.value||!G||(Y==null||Y(),y.value=void 0)}function J(a){if(!!a.ctrlKey){if(a.deltaY<0)return a.preventDefault(),!1;if(a.deltaY>0)return a.preventDefault(),!1}}function F(){!H.value||(R=V("wheel",J,{passive:!1}),s=document.body.style.overflow,document.body.style.overflow="hidden",L.value=!0,c("show"))}function Q(){R==null||R(),document.body.style.overflow=s,L.value=!1,c("close")}function U(a){c("switch",a)}return ce(()=>n.src,()=>{W.value?(E.value=!0,S.value=!1,X(),Z()):$()}),pe(()=>{W.value?Z():$()}),(a,t)=>(v(),k("div",{ref_key:"container",ref:w,class:_([e(g).b(),a.$attrs.class]),style:de(e(se))},[S.value?ee(a.$slots,"error",{key:0},()=>[m("div",{class:_(e(g).e("error"))},te(e(d)("el.image.error")),3)]):(v(),k(K,{key:1},[O.value!==void 0?(v(),k("img",$e({key:0},e(D),{src:O.value,loading:a.loading,style:e(oe),class:e(j),onClick:F,onLoad:re,onError:ie}),null,16,vt)):C("v-if",!0),E.value?(v(),k("div",{key:1,class:_(e(g).e("wrapper"))},[ee(a.$slots,"placeholder",{},()=>[m("div",{class:_(e(g).e("placeholder"))},null,2)])],2)):C("v-if",!0)],64)),e(H)?(v(),k(K,{key:2},[L.value?(v(),P(e(ct),{key:0,"z-index":a.zIndex,"initial-index":e(le),infinite:a.infinite,"zoom-rate":a.zoomRate,"url-list":a.previewSrcList,"hide-on-click-modal":a.hideOnClickModal,teleported:a.previewTeleported,"close-on-press-escape":a.closeOnPressEscape,onClose:Q,onSwitch:U},{default:I(()=>[a.$slots.viewer?(v(),k("div",mt,[ee(a.$slots,"viewer")])):C("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):C("v-if",!0)],64)):C("v-if",!0)],6))}});var _t=be(gt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const wt=Ie(_t);const yt={class:"card"},ht={class:"content"},kt={class:"description"},bt={class:"meta"},It={__name:"NoteItem",props:{item:{type:Object,default(){return{id:String,title:String,description:String,createTime:String}}}},setup(r){const c=r,{item:n}=_e(c),s=p(()=>n.value.description?n.value.description.slice(0,80)+"...":"");return(d,g)=>{const l=Be("router-link");return v(),k("div",yt,[m("div",ht,[f(l,{class:"title",to:`/notes/detail/${e(n).id}`},{default:I(()=>[m("div",null,te(e(n).title),1)]),_:1},8,["to"]),m("div",kt,te(s.value),1),m("div",bt,te(e(n).createTime),1)]),e(n).poster?(v(),P(e(wt),{key:0,fit:"cover",class:"image",src:e(n).poster,lazy:"",alt:"\u9884\u89C8"},null,8,["src"])):C("",!0)])}}},zt=Ae(It,[["__scopeId","data-v-1ec1a9a7"]]),xt={__name:"index",setup(r){const c=Me(),n=p(()=>{const{tag:s={}}=_e(c.query||{});let d=Ve;return s.value!==void 0&&s.value!==null&&(d=d.filter(g=>{var l;return(l=g.tags)==null?void 0:l.find(D=>D===s.value)})),d});return(s,d)=>(v(),k("div",null,[(v(!0),k(K,null,ge(n.value,g=>(v(),P(zt,{key:g.id,item:g},null,8,["item"]))),128))]))}};export{xt as default};
